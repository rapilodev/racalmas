<script src="js/image.js" type="text/javascript"></script>

<script type="text/javascript">
var region='<TMPL_VAR loc.region escape=js>';
set_breadcrumb('<TMPL_VAR .loc.title>');
</script>


<!-- projects -->
<div style="clear:both" class="flex scrollable">
<TMPL_LOOP projects>
<div class="panel project">

<div class="panel-header">
    <div class="title"><TMPL_VAR title></div>
</div>

<!-- view project -->
<div id="view_<TMPL_VAR project_id>" class="panel-body editor">
    <TMPL_IF image>
    <div>
        <label><TMPL_VAR .loc.label_image></label>
        <img src="show-image.cgi?project_id=<TMPL_VAR .project_id>&studio_id=<TMPL_VAR .studio_id>&filename=<TMPL_VAR image>&type=thumbs"> &nbsp;
    </div>
    </TMPL_IF>

    <div>
        <label><TMPL_VAR .loc.label_name></label>
        <div><TMPL_VAR name></div>
    </div>

    <TMPL_IF subtitle>
    <div>
        <label><TMPL_VAR .loc.label_subtitle></label>
        <TMPL_VAR subtitle>
    </div>
    </TMPL_IF>

    <div>
        <label><TMPL_VAR .loc.label_activity></label>
        <TMPL_VAR start_date> - <TMPL_VAR end_date>
    </div>

    <TMPL_IF email>
    <div>
        <label><TMPL_VAR .loc.label_email></label>
        <TMPL_VAR email>
    </div>
    </TMPL_IF>

    <div>
        <label><TMPL_VAR .loc.label_studios></label>
        <TMPL_LOOP assigned_studios>
            <TMPL_VAR name>, 
        </TMPL_LOOP>
    </div>
</div>

<TMPL_IF .allow.update_project>
    <button class="" onclick="edit_project($(this), '<TMPL_VAR project_id escape=js>')"
        data-action="<TMPL_VAR .loc.button_edit escape=HTML>"
        data-cancel="<TMPL_VAR .loc.button_cancel escape=HTML>"
    ><TMPL_VAR .loc.button_edit></button>
</TMPL_IF>

<!-- update project -->
<TMPL_IF .allow.update_project>
<form method="post" action="projects.cgi?project_id=<TMPL_VAR .project_id>&studio_id=<TMPL_VAR .studio_id>"
    id="project_<TMPL_VAR project_id>"
>
<div id="edit_<TMPL_VAR project_id>" class="panel-body editor" style="display:none;">
    <input type="hidden" name="project_id" value="<TMPL_VAR .project_id>">
    <input type="hidden" name="studio_id" value="<TMPL_VAR .studio_id>">
    <input type="hidden" name="pid" value="<TMPL_VAR pid>">
    <div>
        <label><TMPL_VAR .loc.label_title></label>     
        <input name="title" value="<TMPL_VAR title>">
    </div>
    <div>
        <label><TMPL_VAR .loc.label_image></label>
        <button
            class="selectImage"
            onclick="selectImage('<TMPL_VAR name escape=js>', '<TMPL_VAR image  escape=js>', 'projects', '<TMPL_VAR .project_id escape=js>','<TMPL_VAR .studio_id escape=js>', null, null, '<TMPL_VAR pid escape=js>'); return false;"
        >
            <img id="imagePreview" src="show-image.cgi?project_id=<TMPL_VAR .project_id>&studio_id=<TMPL_VAR .studio_id>&filename=<TMPL_VAR image>&type=icon">
        </button>
        <input id="image_<TMPL_VAR pid>" name="image" value="<TMPL_VAR image>" class="image" placeholder="<TMPL_VAR .loc.template_image>">
    </div>
    <div>
        <label><TMPL_VAR .loc.label_name></label>
        <input name="name" value="<TMPL_VAR name>">
    </div>
    <div>
        <label><TMPL_VAR .loc.label_subtitle></label>
        <input name="subtitle" value="<TMPL_VAR subtitle>">
    </div>
    <div>
        <label><TMPL_VAR .loc.label_start_date></label>
        <input class="date" name="start_date" value="<TMPL_VAR start_date>">
    </div>
    <div>
        <label><TMPL_VAR .loc.label_end_date></label>
        <input class="date" name="end_date" value="<TMPL_VAR end_date>">
    </div>
    <div>
        <label><TMPL_VAR .loc.label_email></label>
        <input type="email" name="email" value="<TMPL_VAR email>">
    </div>

    <div class="sidebar">
        <button type=submit name="action" value="save"><TMPL_VAR .loc.button_save></button>
        <TMPL_IF .allow.delete_project>
            <div class="right">
                <button type=submit class="text" name="action" value="delete"
                    onclick="commitForm('project_<TMPL_VAR project_id>','delete','<TMPL_VAR .loc.button_delete escape=js>');return false;"
                ><TMPL_VAR .loc.button_delete></button>
            </div>
        </TMPL_IF>
    </div>

    <TMPL_IF .allow.update_project>
    <button onclick="edit_project_assignments('<TMPL_VAR project_id escape=js>')"
        class="text" style="float:left;margin:0;padding:0;text-align:left;"
    ><TMPL_VAR .loc.button_change></button>
    </TMPL_IF>

</div>
</form>
</TMPL_IF> <!-- end update project -->

<TMPL_IF .allow.assign_project_studio>
<div id="assign_<TMPL_VAR project_id>" class="editor"  style="display:none">

<!-- assign studios -->
<div class="edit_series_members_<TMPL_VAR .series_id>" >
<form method="post" action="projects.cgi?project_id=<TMPL_VAR .project_id>&studio_id=<TMPL_VAR .studio_id>">
    <input type="hidden" name="project_id" value="<TMPL_VAR .project_id>">
    <input type="hidden" name="studio_id"  value="<TMPL_VAR .studio_id>">
    <input type="hidden" name="pid"        value="<TMPL_VAR pid>">
    <input type="hidden" name="action"     value="assign_studio">
    <select name="sid">
        <option value=""><TMPL_VAR .loc.label_select_studio></option>
        <TMPL_LOOP unassigned_studios>
            <option value="<TMPL_VAR id>"><TMPL_VAR name></option>
        </TMPL_LOOP>
    </select>
    <button type="submit"><TMPL_VAR .loc.button_assign_studio></button>
</form>
</div>
<!-- end assign studios -->

<!-- unassign studios -->
<TMPL_LOOP assigned_studios>
    <label><TMPL_VAR name></label>
    <div class="edit_series_members_<TMPL_VAR .series_id>" >
    <form method="post"
        action="projects.cgi?project_id=<TMPL_VAR .project_id>&studio_id=<TMPL_VAR .studio_id>"
    >
        <input type="hidden" name="project_id" value="<TMPL_VAR .project_id>">
        <input type="hidden" name="studio_id"  value="<TMPL_VAR .studio_id>">
        <input type="hidden" name="pid"        value="<TMPL_VAR pid>">
        <input type="hidden" name="sid"        value="<TMPL_VAR sid>">
        <input type="hidden" name="action"     value="unassign_studio">
        <button type="submit" class="text"
            onclick="commitForm($(this).parent(),'unassign_studio','<TMPL_VAR .loc.button_unassign_studio escape=js>');return false;"
        ><TMPL_VAR .loc.button_unassign_studio></button>
    </form>
    </div>
</TMPL_LOOP>
<!-- end unassign studios -->

</div>
</TMPL_IF> <!-- .allow.assign_project_studio -->

</div>
</TMPL_LOOP>
</div>
<!--  projects -->

<TMPL_IF .allow.create_project>
<div style="clear:both" class="newproject">
    <button onclick="add_project('<TMPL_VAR name escape=js>')"><TMPL_VAR .loc.button_add_project></button><br/>

    <form method="post">
    <div id="edit_new" class="panel project editor" style="clear:both;display:none">
        <input type="hidden" name="project_id" value="<TMPL_VAR .project_id>">
        <input type="hidden" name="studio_id"  value="<TMPL_VAR .studio_id>">
        <div>
            <label><TMPL_VAR .loc.label_name></label>
            <input name="name">
        </div>
        <div>
            <label><TMPL_VAR .loc.label_title></label>
            <input name="title">
        </div>
        <div>
            <label><TMPL_VAR .loc.label_subtitle></label>
            <input name="subtitle">
        </div>
        <div>
            <label><TMPL_VAR .loc.label_start_date></label>
            <input name="start_date" class="date">
        </div>
        <div>
            <label><TMPL_VAR .loc.label_end_date></label>
            <input name="end_date" class="date">
        </div>
        <div>
            <label><TMPL_VAR .loc.label_email></label>
            <input name="email">
        </div>
        <div class="sidebar">
            <button class="text cancel" onclick="cancel_edit_project($(this),'new');return false;"><TMPL_VAR .loc.button_cancel></button>
            <button type=submit name="action" value="save"><TMPL_VAR .loc.button_create></button>
        </div>
    </div>
    </form>
</div>
</TMPL_IF> <!--  create project -->

</main>
</body>
</html>
